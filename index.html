<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Radio Show — Spotify + Voice</title>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' https://sdk.scdn.co; style-src 'self' https://fonts.googleapis.com 'unsafe-inline'; font-src 'self' https://fonts.gstatic.com; connect-src https://api.spotify.com https://accounts.spotify.com 'self'; img-src 'self' data: https://i.scdn.co; media-src 'self' data: blob:; frame-ancestors 'none'; base-uri 'self'; form-action 'self'">
  <meta name="referrer" content="no-referrer" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Space+Grotesk:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://sdk.scdn.co/spotify-player.js" async></script>
</head>
<body>
  <div class="noise"></div>
  <header class="hero">
    <div class="title-block">
      <p class="tag">interplanetary radio show</p>
      <h1>RADIO-LAB</h1>
      <p class="lede">curate, speak, share.</p>
      <div class="status-row">
        <div class="status-chip" id="spotify-status">spotify: disconnected</div>
        <div id="ticker" class="ticker">now playing: —</div>
      </div>
      <div class="top-actions">
        <button id="connect-toggle" class="ghost small">Auth Panel</button>
      </div>
    </div>
    <div class="chip-stack">
      <!-- <div class="chip">vocal fader</div> -->
      <!-- <div class="chip">playlist pilot</div> -->
      <!-- <div class="chip">minimal + 2d</div> -->
    </div>
    <div class="theme-switch" id="theme-switch">
      <button class="theme-dot" data-theme="default" title="Aqua">◼</button>
      <button class="theme-dot" data-theme="ember" title="Ember">◼</button>
      <button class="theme-dot" data-theme="sunset" title="Sunset">◼</button>
      <button class="theme-dot" data-theme="violet" title="Violet">◼</button>
    </div>
  </header>

  <main class="grid">
    <section class="panel connect floating collapsed" id="connect-panel">
      <div class="panel-head">
        <h2>Connect</h2>
        <span class="hint">needs a Spotify OAuth token</span>
        <button id="connect-close" class="ghost small">Close</button>
      </div>
      <label class="field">
        <span>Client ID (PKCE)</span>
        <input id="client-id-input" type="text" placeholder="Spotify app client ID" autocomplete="off" />
      </label>
      <label class="field">
        <span>Redirect URI</span>
        <input id="redirect-input" type="text" placeholder="https://your-site/callback" autocomplete="off" />
      </label>
      <div class="row">
        <button id="auth-btn" class="primary">Authorize with Spotify (PKCE)</button>
      </div>
      <label class="field">
        <span>OAuth token</span>
        <input id="token-input" type="password" placeholder="Bearer token with streaming + playback scopes" autocomplete="off" />
      </label>
      <div class="row">
        <button id="connect-btn" class="primary">Connect Player</button>
        <button id="disconnect-btn" class="ghost">Disconnect</button>
        <button id="forget-token-btn" class="ghost small">Forget Token</button>
      </div>
      <div class="field">
        <span>Show volume</span>
        <input id="master-volume" type="range" min="0" max="100" value="80" />
      </div>
      <p class="note">Scopes: streaming, user-modify-playback-state, user-read-playback-state, user-library-read, playlist-read-private, playlist-read-collaborative. The SDK spins up a local player called <strong>Radio Show Deck</strong>.</p>
    </section>

    <section class="panel search">
      <div class="panel-head">
        <h2>Find Tracks</h2>
        <span class="hint">search Spotify</span>
      </div>
      <form id="search-form" class="row">
        <input id="search-input" type="text" placeholder="Search tracks..." autocomplete="off" />
        <button type="submit" class="primary">Search</button>
      </form>
      <div class="row wrap">
        <button id="library-btn" class="ghost small">Saved Tracks</button>
        <button id="playlists-btn" class="ghost small">My Playlists</button>
        <button id="clear-results-btn" class="ghost small">Clear</button>
      </div>
      <ul id="results" class="list"></ul>
    </section>

    <section class="panel recorder">
      <div class="panel-head">
        <h2>Voice Bites</h2>
        <span class="hint">record in-browser</span>
      </div>
      <div class="row wrap">
        <button id="record-btn" class="primary">Start Recording</button>
        <button id="stop-record-btn" class="ghost" disabled>Stop</button>
        <label class="field small">
          <span>Label</span>
          <input id="record-label" type="text" placeholder="Voice bumper" />
        </label>
        <div class="timer" id="record-timer">00:00</div>
      </div>
      <div class="preview" id="record-preview">
        <p>No recording yet.</p>
      </div>
      <button id="add-recording-btn" class="primary wide" disabled>Add to Show</button>
      <div class="row wrap">
        <button id="upload-btn" class="ghost">Upload MP3 / WAV</button>
        <input id="upload-input" type="file" accept="audio/mpeg,audio/mp3,audio/wav,audio/webm" style="display:none" />
      </div>
    </section>

    <section class="panel show">
      <div class="panel-head">
        <h2>Show Builder</h2>
        <span class="hint" id="show-length">0:00</span>
      </div>
      <div class="row wrap">
        <label class="field">
          <span>Session title</span>
          <input id="session-title" type="text" placeholder="Radio Lab Session" />
        </label>
        <label class="field small">
          <span>Host</span>
          <input id="session-host" type="text" placeholder="Your name" />
        </label>
        <label class="field small">
          <span>Genre</span>
          <input id="session-genre" type="text" placeholder="Genre tags" />
        </label>
        <label class="field small">
          <span>Date</span>
          <input id="session-date" type="date" />
        </label>
      </div>
      <div class="row wrap">
        <button id="play-show-btn" class="primary">Play Show</button>
        <button id="stop-show-btn" class="ghost">Stop</button>
        <label class="field small">
          <span>Fade (ms)</span>
          <input id="fade-duration" type="number" min="200" max="4000" step="100" value="1200" />
        </label>
        <button id="save-show-btn" class="ghost">Save Show (full)</button>
        <button id="load-show-btn" class="ghost">Load Show</button>
        <button id="save-tracks-btn" class="ghost">Save Tracks Only</button>
        <input id="load-input" type="file" accept="application/json" style="display:none" />
      </div>
      <ul id="segments" class="list segments"></ul>
    </section>
  </main>

  <noscript class="noscript">Enable JavaScript to use the radio builder.</noscript>
  <script src="app.js" defer></script>
</body>
</html>
